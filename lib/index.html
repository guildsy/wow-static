<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script async defer src="https://wow.zamimg.com/widgets/power.js"></script>

	<script>
		window.wowhead_tooltips = {
			colorlinks: true,
			hide: {
				sellprice: true,
				dropchance: true
			}
		};
	</script>

	<style>
		* {
			box-sizing: border-box;
		}

		body {
			margin: 0;
			background-color: #E4E4E4;
			display: flex;
			flex-direction: row;
		}

		.list-col {
			flex-shrink: 0;
			width: 300px;
			border-right: 2px solid black;
		}

		.list-item {
			font-size: 20px;
			padding: 10px;
			cursor: pointer;
			border-bottom: 1px solid #D3D3D3;
		}

		.automation-col {
			flex-shrink: 0;
			width: 400px;
			border-left: 2px solid black;
			padding: 20px;
		}

		.automation-col input {
			max-width: 300px;
			display: inline-block !important;
		}

		.automation-col textarea {
			width: 100%;
			height: 400px;
		}

		.list-col, .automation-col {
			height: 100vh;
			overflow: auto;
		}

		.list-item:hover, .list-item.selected {
			background-color: #D3D3D3;
		}

		.item-col {
			flex-grow: 1;
			padding: 10px;
		}

		.item-col.error {
			background-color: rgba(255, 0, 0, 0.5);
		}

		#icon {
			display: block;
			margin-bottom:  5px
		}

		[name="boss"], [name="sourceId"] {
			display: inline-block !important;
			width: 150px !important;
		}

		select,
		input[type="text"] {
			display: block;
			margin: 10px 0;
			padding: 5px;
			width: 300px;
			border: 1px solid black;
			height: 25px;
		}

		.checkboxes {
			display: inline-block;
			vertical-align: top;
			margin: 5px 20px;
		}

		.checkboxes > label {
			display: block;
			padding: 5px 0;
		}

		[name$="death_knight"] + span,
		#death_knight {
			color: #C41F3B;
		}

		[name$="demon_hunter"] + span,
		#demon_hunter {
			color: #A330C9 !important;
		}

		[name$="druid"] + span,
		#druid {
			color: #FF7D0A;
		}

		[name$="hunter"] + span,
		#hunter {
			color: #ABD473;
		}

		[name$="mage"] + span,
		#mage {
			color: #69CCF0;
		}

		[name$="monk"] + span,
		#monk {
			color: #00FF96;
		}

		[name$="paladin"] + span,
		#paladin {
			color: #F58CBA;
		}

		[name$="priest"] + span,
		#priest {
			color: #000;
		}

		[name$="rogue"] + span,
		#rogue {
			color: #FFF569;
		}

		[name$="shaman"] + span,
		#shaman {
			color: #0070DE;
		}

		[name$="warlock"] + span,
		#warlock {
			color: #9482C9;
		}

		[name$="warrior"] + span,
		#warrior {
			color: #C79C6E;
		}

		[name$="evoker"] + span,
		#evoker {
			color: #33937f;
		}

		.buttons > .button-row {
			margin-top: 1rem;
		}

		.button {
			display: inline-block;
			padding: 10px 15px;
			cursor: pointer;
			background-color: gray;
			text-transform: uppercase;
			color: #FFF;
		}

		.button.fluid {
			width: 100%;
			text-align: center;
			box-sizing: border-box;
		}

		.button.red {
			background-color: red;
		}

		.button.green {
			background-color: green;
		}

		.button.small {
			padding: 5px 5px;
		}

		.mtop20 {
			margin-top: 20px
		}

		#search {
			margin: 0;
			font-size: 20px;
			border: none;
			height: auto;
		}

		#wowhead input {
			display: inline-block;
		}
	</style>
</head>
<body>
	<div class="list-col">
		<input id="search" type="text" placeholder="item name" />
		<div id="new" class="button fluid">new</div>
		<div id="check" class="green button fluid">check</div>
	</div>

	<div class="item-col">
		<img id="icon" />

		<a id="tooltip" href="#" rel="">tooltip</a>

		<div>
			<div id="remove" class="button red mtop20">remove</div>
			<div id="send" class="button green mtop20">send</div>
		</div>

		<form id="wowhead">
			<label>
				Fill via wowhead:
				<div>
					<input name="wowhead" type="text" />
					<button type="submit">Go</button>
				</div>
			</label>
		</form>

		<label>Name: <input name="name" type="text" /></label>
		<label>id: <input name="id" type="text" /></label>
		<label>SourceID:<br/>
			<input name="sourceId" type="text" />
			<select name="boss">
				<option value="">Source</option>
			</select>
		</label>

		<select name="slot">
			<option value="">slot</option>
			<option value="misc">Misc</option>
			<option value="relic">Relic</option>
			<option value="conduit">Conduit</option>
			<option value="head">Head</option>
			<option value="neck">Neck</option>
			<option value="shoulder">Shoulder</option>
			<option value="back">Back</option>
			<option value="chest">Chest</option>
			<option value="wrist">Wrist</option>
			<option value="hands">Hands</option>
			<option value="waist">Waist</option>
			<option value="legs">Legs</option>
			<option value="feet">Feet</option>
			<option value="finger">Finger</option>
			<option value="trinket">Trinket</option>
			<option value="weapon">Weapon</option>
			<option value="offhand">Offhand</option>
			<option value="whatever_token">Whatever tier token</option>
			<option value="weapon_token">Weapon token</option>
			<option value="legendary_recipe">Legendary recipe</option>
		</select>

		<div class="buttons">
			<div class="button-row">
				<div id="intellect" class="small button">intellect</div>
				<div id="strength" class="small button">strength</div>
				<div id="agility" class="small button">agility</div>
			</div>

			<div class="button-row">
				<div id="cloth" class="small button">cloth</div>
				<div id="leather" class="small button">leather</div>
				<div id="mail" class="small button">mail</div>
				<div id="plate" class="small button">plate</div>
			</div>

			<!-- <div id="conq" class="small button">conq</div>
			<div id="vanq" class="small button">vanq</div>
			<div id="prot" class="small button">prot</div>

			<br /> -->

			<div class="button-row">
				<div id="death_knight" class="small button">death_knight</div>
				<div id="paladin" class="small button">paladin</div>
				<div id="warrior" class="small button">warrior</div>
				<div id="hunter" class="small button">hunter</div>
				<div id="shaman" class="small button">shaman</div>
				<div id="druid" class="small button">druid</div>
				<br />
				<div id="monk" class="small button">monk</div>
				<div id="rogue" class="small button">rogue</div>
				<div id="demon_hunter" class="small button">demon_hunter</div>
				<div id="priest" class="small button">priest</div>
				<div id="mage" class="small button">mage</div>
				<div id="warlock" class="small button">warlock</div>
				<div id="evoker" class="small button">evoker</div>
			</div>

			<div class="button-row">
				<div id="tier-dreadful" class="small button">dreadful</div>
				<div id="tier-mystic" class="small button">mystic</div>
				<div id="tier-venerated" class="small button">venerated</div>
				<div id="tier-zenith" class="small button">zenith</div>
			</div>
		</div>

		<div>
			<label class="checkboxes">melee:
				<label><input type="checkbox" name="melee-death_knight" /><span>Death Knight</span></label>
				<label><input type="checkbox" name="melee-paladin" /><span>Paladin</span></label>
				<label><input type="checkbox" name="melee-warrior" /><span>Warrior</span></label>
				<label><input type="checkbox" name="melee-hunter" /><span>Hunter</span></label>
				<label><input type="checkbox" name="melee-shaman" /><span>Shaman</span></label>
				<label><input type="checkbox" name="melee-druid" /><span>Druid</span></label>
				<label><input type="checkbox" name="melee-monk" /><span>Monk</span></label>
				<label><input type="checkbox" name="melee-rogue" /><span>Rogue</span></label>
				<label><input type="checkbox" name="melee-demon_hunter" /><span>Demon Hunter</span></label>
			</label>

			<label class="checkboxes">ranged:
				<label><input type="checkbox" name="ranged-hunter" /><span>Hunter</span></label>
				<label><input type="checkbox" name="ranged-shaman" /><span>Shaman</span></label>
				<label><input type="checkbox" name="ranged-druid" /><span>Druid</span></label>
				<label><input type="checkbox" name="ranged-priest" /><span>Priest</span></label>
				<label><input type="checkbox" name="ranged-mage" /><span>Mage</span></label>
				<label><input type="checkbox" name="ranged-warlock" /><span>Warlock</span></label>
				<label><input type="checkbox" name="ranged-evoker" /><span>Evoker</span></label>
			</label>

			<label class="checkboxes">healers:
				<label><input type="checkbox" name="healers-paladin" /><span>Paladin</span></label>
				<label><input type="checkbox" name="healers-shaman" /><span>Shaman</span></label>
				<label><input type="checkbox" name="healers-druid" /><span>Druid</span></label>
				<label><input type="checkbox" name="healers-monk" /><span>Monk</span></label>
				<label><input type="checkbox" name="healers-priest" /><span>Priest</span></label>
				<label><input type="checkbox" name="healers-evoker" /><span>Evoker</span></label>
			</label>

			<label class="checkboxes">tanks:
				<label><input type="checkbox" name="tanks-death_knight" /><span>Death Knight</span></label>
				<label><input type="checkbox" name="tanks-paladin" /><span>Paladin</span></label>
				<label><input type="checkbox" name="tanks-warrior" /><span>Warrior</span></label>
				<label><input type="checkbox" name="tanks-druid" /><span>Druid</span></label>
				<label><input type="checkbox" name="tanks-monk" /><span>Monk</span></label>
				<label><input type="checkbox" name="tanks-demon_hunter" /><span>Demon Hunter</span></label>
			</label>
		</div>
	</div>

	<div class="automation-col">
		<form id="boss-url">
			<label>
				<div>
					<input name="boss-url" type="text" placeholder="boss url" />
					<button type="submit">Go</button>
				</div>
			</label>
		</form>

		<textarea id="boss-url-list"></textarea>

		<div id="button-restart-automation" class="small button">restart automation</div>
	</div>

	<script>
		const BOSSES = [
        {
          "encounterId": "?",
          "name": "Plexus Sentinel",
          "id": "233814"
        },

        {
          "encounterId": "?",
          "name": "Loom'ithar",
          "id": "233815"
        },

        {
          "encounterId": "?",
          "name": "Soulbinder Naazindhri",
          "id": "233816"
        },

        {
          "encounterId": "?",
          "name": "Forgeweaver Araz",
          "id": "247989"
        },

        {
          "encounterId": "?",
          "name": "The Soul Hunters",
          "id": "237661"
        },

        {
          "encounterId": "?",
          "name": "Fractillus",
          "id": "237861"
        },

        {
          "encounterId": "?",
          "name": "Nexus-King Salhadaar",
          "id": "237763"
        },

        {
          "encounterId": "?",
          "name": "Dimensius",
          "id": "233824"
        }
      ].map(({name, id}) => [name, id]);

		ITEMS = {};
		CURRENT_ITEM = null;
		SEARCH = '';
		var IS_PTR = true;
		var $list;
		var $item;
		var EMPTY_ITEM = {
			allowed: {
				melee: [],
				ranged: [],
				healers: [],
				tanks: []
			}
		};

		// Set the value based on what's there initially
		let bossItemUrlsCache = $('#boss-url-list').val().split('\n');;

		window.addEventListener('focus', () => {
			window.setTimeout(() => {
				document.querySelector('#wowhead input').focus();
			}, 0);
		});

		function getAll(cb) {
			$.getJSON('/items', function(data) {
				ITEMS = data;
				if (cb) cb();
			});
		}

		function updateBossUrlList() {
			$('#boss-url-list').val(bossItemUrlsCache.join('\n'));
		}

		function removeItemIdFromTextarea(itemId) {
			// remove this item from the cache as it's been handled
			bossItemUrlsCache = bossItemUrlsCache.filter((x) => !x.includes(itemId));
			updateBossUrlList();
		}

		async function automateItemUrlSubmission() {
			const itemUrls = [...bossItemUrlsCache];
			for (let itemUrl of itemUrls) {
				try {
					// pass the url to the submission function
					await onWowhead(itemUrl, true);
				} catch (e) {
					console.error('error handling auto loot', e)
				}
			}
		}

		function renderList() {
			$list.find('.list-item').remove();

			var re = new RegExp(SEARCH, 'i');

			Object.keys(ITEMS).forEach(function(item, i) {
				item = ITEMS[item];

				if (SEARCH && ! item.name.match(re)) return;

				$('<div/>', {
					class: 'list-item',
					text: item.name,
					click: function() {
						$list.find('.list-item').removeClass('selected');
						$(this).addClass('selected');
						renderItem(item);
					}
				}).appendTo($list);
			});
		}

		function renderItem(item) {
			CURRENT_ITEM = item;
			$item.removeClass('error');

			$('#wowhead').find('input').val('');

			$('#icon').prop('src', item.icon);

			$('[name="name"]').val(item.name);
			$('[name="id"]').val(item.id);
			$('[name="sourceId"]').val(item.sourceId);

			// reset incase of blanks
			$('[type="checkbox"]').prop('checked', false);

			$('[name="slot"]').val(item.slot);
			$('[name="boss"]').val(item.sourceId || '');

			Object.keys(item.allowed).forEach(function(role) {
				item.allowed[role].forEach(function(c) {
					$('[name="' + role + '-' + c + '"]').prop('checked', true);
				});
			});
		}

		async function onSend() {
			var item = {
				allowed: {
					melee: [],
					ranged: [],
					healers: [],
					tanks: []
				}
			};

			$('[type="checkbox"]').each(function() {
				var s = this.name.split('-');

				if (this.checked) {
					item.allowed[s[0]].push(s[1]);
				}
			});

			item.name = $('[name="name"]').val();
			item.id = $('[name="id"]').val();
			item.sourceId = $('[name="sourceId"]').val();
			item.slot = $('[name="slot"]').val();

			if (CURRENT_ITEM && CURRENT_ITEM.id && item.id !== CURRENT_ITEM.id) {
				item.oldItemID = CURRENT_ITEM.id;
			}

			var a = item.allowed;
			console.log('item info', item);
			if ( ! item.name || ! item.id || ! item.sourceId
				 || ! item.slot ||
				 (! a.melee.length && ! a.ranged.length
				 && ! a.healers.length && ! a.tanks.length)) {
				$item.addClass('error');
				return false;
			}

			const res = await fetch('/item', {
				method: 'POST',
				body: JSON.stringify(item),
				headers: {
					'Content-Type': 'application/json',
				},
			});

			const data = await res.json();

			console.log('saved', item);
			getAll(renderList);

			// hack to stop having to set new boss
			EMPTY_ITEM.sourceId = item.sourceId;
			renderItem(EMPTY_ITEM);
			$('#wowhead').find('input').focus();

			// maybe remove this item from automation list
			removeItemIdFromTextarea(item.id);

			return true;
		}

		function onRemove() {
			$.ajax('/item/' + CURRENT_ITEM.id, {
				type: 'DELETE',
				success: function() {
					delete ITEMS[CURRENT_ITEM.id];
					renderList();
					renderItem(EMPTY_ITEM);
				}
			});
		}

		function onNew() {
			renderItem(EMPTY_ITEM);
		}

		// go through and check that each items has
		// all the fields filled in
		function onCheck() {
			console.log('starting check');

			Object.keys(ITEMS).forEach(function(item) {
				item = ITEMS[item];
				var a = item.allowed;
				var errors = [];

				if ( ! item.name) errors.push('name');
				if ( ! item.sourceId) errors.push('sourceId');
				if ( ! item.slot) errors.push('slot');
				if ( ! a.melee.length && ! a.ranged.length && ! a.healers.length && ! a.tanks.length) errors.push('allowed');

				if ( ! item.icon) errors.push('icon');

				if (errors.length) {
					console.warn('%s (%s) is missing: %s', item.name, item.id, errors.join(', '));
				}
			});

			console.log('check done');
		}

		async function onBossUrl(bossUrl) {
			// console.log(bossUrl);
			if (!bossUrl) return;

			const res = await fetch('/wowhead/boss', {
				method: 'POST',
				body: JSON.stringify({
					url: bossUrl
				}),
				headers: {
					'Content-Type': 'application/json',
				},
			});

			const {urls} = await res.json();
			console.log('boss item urls', urls);

			bossItemUrlsCache = urls;
			updateBossUrlList();
			automateItemUrlSubmission();
		}

		async function onWowhead(id, isAutomated) {
			if ( ! id) return;

			if (id.includes('wowhead.com')) {
				var match = /wowhead.com\/(?:beta\/)*(?:ptr(?:-2)?\/)*item=(\d+).*/.exec(id);
				console.log(match)
				if (match) id = match[1];
			}

			const res = await fetch('/wowhead/' + id);
			const data = await res.json();

			console.log('wowhead', data);

			if (data.isClassSpecific) {
				console.warn('probably tier piece', data);
			}

			$('[name="name"]').val(data.name);
			$('[name="id"]').val(id);

			var slot = (data.slot || 'misc').toLowerCase();

			const isWeapon = ['ranged', 'one-hand', 'two-hand'].includes(slot);
			const isOffhand = ['shield', 'held in off-hand', 'off hand'].includes(slot);
			let selectSlot = slot;
			if (isWeapon) selectSlot = 'weapon';
			else if (isOffhand) selectSlot = 'offhand';
			else if (data.name.includes('Anima') && data.armour === '1') {
				selectSlot = 'weapon_token';
			}
			$('[name="slot"]').val(selectSlot);

			// tooltip
			var prefix = IS_PTR ? 'ptr' : 'www';
			var link = `https://${prefix}.wowhead.com/item=` + id;
			var t = $('#tooltip').attr('href', link);

			if (!isAutomated) {
				t.remove();

				setTimeout(function() {
					t.insertBefore('#wowhead');
				}, 500);
			}


			// auto tick armour types
			// function is(a, type) {
			// 	return a.indexOf(type) === 0;
			// }

			var armour = (data.armour || '').toLowerCase();

			if (armour.indexOf('relic') !== -1) {
				$('#' + armour.split(' ')[0]).click();
				$('[name="slot"]').val('relic');
			} else if (slot === 'conduit') {
				(data.classes || []).forEach((cls) => {
					if (cls === 'death') $(`#death_knight`).click();
					else if (cls === 'demon') $(`#demon_hunter`).click();
					else $(`#${cls}`).click();
				});
			} else if (slot === 'finger' || slot === 'back' || slot === 'neck') {
				$('[type="checkbox"]').prop('checked', true);
			} else if (isOffhand || isWeapon || slot === 'trinket' || data.isClassSpecific) {
				if (data.specs) selectSpecs(data.specs);
			} else {
				var types = ['cloth', 'leather', 'mail', 'plate'];

				types.forEach(function(type, i) {
					if (armour == i + 1) {
						$('#' + type).click();
					}
				});
			}

			return await onSend();
		}

		function selectSpec(spec) {
			console.log('spec', spec);
			switch (spec) {
				case 62:
				case 63:
				case 64:
					$('[name="ranged-mage"]').prop('checked', true);
					break;

				case 65:
					$('[name="healers-paladin"]').prop('checked', true);
					break;

				case 66:
					$('[name="tanks-paladin"]').prop('checked', true);
					break;

				case 70:
					$('[name="melee-paladin"]').prop('checked', true);
					break;

				case 102:
					$('[name="ranged-druid"]').prop('checked', true);
					break;

				case 103:
					$('[name="melee-druid"]').prop('checked', true);
					break;

				case 104:
						$('[name="tanks-druid"]').prop('checked', true);
					break;

				case 105:
					$('[name="healers-druid"]').prop('checked', true);
					break;

				case 71:
				case 72:
					$('[name="melee-warrior"]').prop('checked', true);
					break;

				case 73:
					$('[name="tanks-warrior"]').prop('checked', true);
					break;

				case 250:
					$('[name="tanks-death_knight"]').prop('checked', true);
					break;

				case 251:
				case 252:
						$('[name="melee-death_knight"]').prop('checked', true);
					break;

				case 255:
					$('[name="melee-hunter"]').prop('checked', true);
					break;

				case 256:
				case 257:
					$('[name="healers-priest"]').prop('checked', true);
					break;

				case 258:
					$('[name="ranged-priest"]').prop('checked', true);
					break;

				case 259:
				case 260:
				case 261:
					$('[name="melee-rogue"]').prop('checked', true);
					break;

				case 262:
					$('[name="ranged-shaman"]').prop('checked', true);
					break;

				case 263:
					$('[name="melee-shaman"]').prop('checked', true);
					break;

				case 264:
					$('[name="healers-shaman"]').prop('checked', true);
					break;

				case 265:
				case 266:
				case 267:
					$('[name="ranged-warlock"]').prop('checked', true);
					break;

				case 268:
					$('[name="tanks-monk"]').prop('checked', true);
					break;

				case 269:
					$('[name="melee-monk"]').prop('checked', true);
					break;

				case 270:
					$('[name="healers-monk"]').prop('checked', true);
					break;

				case 253:
				case 254:
					$('[name="ranged-hunter"]').prop('checked', true);
					break;

				case 577:
					$('[name="melee-demon_hunter"]').prop('checked', true);
					break;

				case 581:
					$('[name="tanks-demon_hunter"]').prop('checked', true);
					break;

				case 1467:
					$('[name="ranged-evoker"]').prop('checked', true);
					break;

				case 1468:
					$('[name="healers-evoker"]').prop('checked', true);
					break;

				default:
					console.log('Unknown spec', spec);
			}
		}

		function selectSpecs(specs) {
			specs.forEach((spec) => selectSpec(spec));
		}

		$(function() {
			$list = $('.list-col');
			$item = $('.item-col');

			$('#send').click(onSend);
			$('#remove').click(onRemove);
			$('#new').click(onNew);
			$('#check').click(onCheck);

			$('#search').on('input', function(e) {
				SEARCH = this.value;
				renderList();
			});

			$('#wowhead').on('submit', function(e) {
				e.preventDefault();
				onWowhead($(this).find('input').val());
			});
			$('#wowhead').on('paste', function(e) {
				onWowhead(e.originalEvent.clipboardData.getData('text'));
			});

			// automation
			$('#boss-url').on('submit', function(e) {
				e.preventDefault();
				onBossUrl($(this).find('input').val());
			})

			$('#button-restart-automation').click(() => {
				bossItemUrlsCache = $('#boss-url-list').val().split('\n');
				automateItemUrlSubmission()
			})

			BOSSES.forEach(function(boss) {
				$('[name="boss"]').append($('<option>', {
					value: boss[1],
					text: boss[0]
				}));
			});

			$('[name="boss"]').change(function() {
				$('[name="sourceId"]').val($(this).val());
			});

			$('#intellect').click(function() {
				$('[name="ranged-shaman"]').prop('checked', true);
				$('[name="ranged-druid"]').prop('checked', true);
				$('[name="ranged-priest"]').prop('checked', true);
				$('[name="ranged-mage"]').prop('checked', true);
				$('[name="ranged-warlock"]').prop('checked', true);
				$('[name="ranged-evoker"]').prop('checked', true);

				$('[name="healers-paladin"]').prop('checked', true);
				$('[name="healers-shaman"]').prop('checked', true);
				$('[name="healers-druid"]').prop('checked', true);
				$('[name="healers-monk"]').prop('checked', true);
				$('[name="healers-priest"]').prop('checked', true);
				$('[name="healers-evoker"]').prop('checked', true);

			});

			$('#strength').click(function() {
				$('[name="melee-death_knight"]').prop('checked', true);
				$('[name="melee-paladin"]').prop('checked', true);
				$('[name="melee-warrior"]').prop('checked', true);

				$('[name="tanks-death_knight"]').prop('checked', true);
				$('[name="tanks-paladin"]').prop('checked', true);
				$('[name="tanks-warrior"]').prop('checked', true);
			});

			$('#agility').click(function() {
				$('[name="ranged-hunter"]').prop('checked', true);

				$('[name="melee-shaman"]').prop('checked', true);
				$('[name="melee-druid"]').prop('checked', true);
				$('[name="melee-monk"]').prop('checked', true);
				$('[name="melee-hunter"]').prop('checked', true);
				$('[name="melee-rogue"]').prop('checked', true);
				$('[name="melee-demon_hunter"]').prop('checked', true);

				$('[name="tanks-druid"]').prop('checked', true);
				$('[name="tanks-monk"]').prop('checked', true);
				$('[name="tanks-demon_hunter"]').prop('checked', true);
			});

			$('#cloth').click(function() {
				$('[name="ranged-priest"]').prop('checked', true);
				$('[name="ranged-mage"]').prop('checked', true);
				$('[name="ranged-warlock"]').prop('checked', true);

				$('[name="healers-priest"]').prop('checked', true);
			});

			$('#leather').click(function() {
				$('[name="melee-druid"]').prop('checked', true);
				$('[name="melee-monk"]').prop('checked', true);
				$('[name="melee-rogue"]').prop('checked', true);
				$('[name="melee-demon_hunter"]').prop('checked', true);

				$('[name="ranged-druid"]').prop('checked', true);

				$('[name="healers-druid"]').prop('checked', true);
				$('[name="healers-monk"]').prop('checked', true);

				$('[name="tanks-druid"]').prop('checked', true);
				$('[name="tanks-monk"]').prop('checked', true);
				$('[name="tanks-demon_hunter"]').prop('checked', true);
			});

			$('#mail').click(function() {
				$('[name="melee-hunter"]').prop('checked', true);
				$('[name="melee-shaman"]').prop('checked', true);

				$('[name="ranged-hunter"]').prop('checked', true);
				$('[name="ranged-shaman"]').prop('checked', true);
				$('[name="ranged-evoker"]').prop('checked', true);

				$('[name="healers-shaman"]').prop('checked', true);
				$('[name="healers-evoker"]').prop('checked', true);
			});

			$('#plate').click(function() {
				$('[name="melee-death_knight"]').prop('checked', true);
				$('[name="melee-paladin"]').prop('checked', true);
				$('[name="melee-warrior"]').prop('checked', true);

				$('[name="healers-paladin"]').prop('checked', true);

				$('[name="tanks-death_knight"]').prop('checked', true);
				$('[name="tanks-paladin"]').prop('checked', true);
				$('[name="tanks-warrior"]').prop('checked', true);
			});

			// $('#conq').click(function() {
			// 	$('[name="melee-paladin"]').prop('checked', true);
			// 	$('[name="melee-demon_hunter"]').prop('checked', true);

			// 	$('[name="ranged-priest"]').prop('checked', true);
			// 	$('[name="ranged-warlock"]').prop('checked', true);

			// 	$('[name="healers-paladin"]').prop('checked', true);
			// 	$('[name="healers-priest"]').prop('checked', true);

			// 	$('[name="tanks-paladin"]').prop('checked', true);
			// 	$('[name="tanks-demon_hunter"]').prop('checked', true);
			// });

			// $('#vanq').click(function() {
			// 	$('[name="melee-death_knight"]').prop('checked', true);
			// 	$('[name="melee-druid"]').prop('checked', true);
			// 	$('[name="melee-rogue"]').prop('checked', true);

			// 	$('[name="ranged-druid"]').prop('checked', true);
			// 	$('[name="ranged-mage"]').prop('checked', true);

			// 	$('[name="healers-druid"]').prop('checked', true);

			// 	$('[name="tanks-death_knight"]').prop('checked', true);
			// 	$('[name="tanks-druid"]').prop('checked', true);
			// });

			// $('#prot').click(function() {
			// 	$('[name="melee-warrior"]').prop('checked', true);
			// 	$('[name="melee-hunter"]').prop('checked', true);
			// 	$('[name="melee-shaman"]').prop('checked', true);
			// 	$('[name="melee-monk"]').prop('checked', true);

			// 	$('[name="ranged-hunter"]').prop('checked', true);
			// 	$('[name="ranged-shaman"]').prop('checked', true);

			// 	$('[name="healers-shaman"]').prop('checked', true);
			// 	$('[name="healers-monk"]').prop('checked', true);

			// 	$('[name="tanks-warrior"]').prop('checked', true);
			// 	$('[name="tanks-monk"]').prop('checked', true);
			// });


			$('#death_knight').click(function() {
				$('[name="melee-death_knight"]').prop('checked', true);
				$('[name="tanks-death_knight"]').prop('checked', true);
			});

			$('#paladin').click(function() {
				$('[name="melee-paladin"]').prop('checked', true);
				$('[name="healers-paladin"]').prop('checked', true);
				$('[name="tanks-paladin"]').prop('checked', true);
			});

			$('#warrior').click(function() {
				$('[name="melee-warrior"]').prop('checked', true);
				$('[name="tanks-warrior"]').prop('checked', true);
			});

			$('#hunter').click(function() {
				$('[name="ranged-hunter"]').prop('checked', true);
				$('[name="melee-hunter"]').prop('checked', true);
			});

			$('#shaman').click(function() {
				$('[name="melee-shaman"]').prop('checked', true);
				$('[name="ranged-shaman"]').prop('checked', true);
				$('[name="healers-shaman"]').prop('checked', true);
			});

			$('#druid').click(function() {
				$('[name="melee-druid"]').prop('checked', true);
				$('[name="ranged-druid"]').prop('checked', true);
				$('[name="healers-druid"]').prop('checked', true);
				$('[name="tanks-druid"]').prop('checked', true);
			});

			$('#monk').click(function() {
				$('[name="melee-monk"]').prop('checked', true);
				$('[name="healers-monk"]').prop('checked', true);
				$('[name="tanks-monk"]').prop('checked', true);
			});

			$('#rogue').click(function() {
				$('[name="melee-rogue"]').prop('checked', true);
			});

			$('#demon_hunter').click(function() {
				$('[name="melee-demon_hunter"]').prop('checked', true);
				$('[name="tanks-demon_hunter"]').prop('checked', true);
			});

			$('#priest').click(function() {
				$('[name="ranged-priest"]').prop('checked', true);
				$('[name="healers-priest"]').prop('checked', true);
			});

			$('#mage').click(function() {
				$('[name="ranged-mage"]').prop('checked', true);
			});

			$('#warlock').click(function() {
				$('[name="ranged-warlock"]').prop('checked', true);
			});

			$('#evoker').click(function() {
				$('[name="ranged-evoker"]').prop('checked', true);
				$('[name="healers-evoker"]').prop('checked', true);
			});

			$('#tier-dreadful').click(function() {
				$('#death_knight').click();
				$('#warlock').click();
				$('#demon_hunter').click();
			});

			$('#tier-mystic').click(function() {
				$('#hunter').click();
				$('#mage').click();
				$('#druid').click();
			});

			$('#tier-venerated').click(function() {
				$('#paladin').click();
				$('#priest').click();
				$('#shaman').click();
			});

			$('#tier-zenith').click(function() {
				$('#warrior').click();
				$('#rogue').click();
				$('#monk').click();
				$('#evoker').click();
			});

			// $('#apogee').click(function() {
			// 	$('#warrior').click();
			// 	$('#paladin').click();
			// 	$('#priest').click();
			// 	$('#monk').click();
			// });

			// $('#thaumaturgic').click(function() {
			// 	$('#shaman').click();
			// 	$('#mage').click();
			// 	$('#warlock').click();
			// 	$('#druid').click();
			// });

			getAll(renderList);
		});
	</script>
</body>
</html>
